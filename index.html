<!doctype html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Nudos (Offline)</title>
  <link rel="stylesheet" href="styles.css" />
</head>

<body>
  <header>
    <h1>Nudos (Offline)</h1>

    <nav class="nav">
      <span id="timer-chip" class="badge doing" style="display:none; cursor:default;">
        <span class="btn-main">â± 05:00</span>
        <span class="btn-sub"></span>
      </span>

      <button id="nav-today" class="btn"><span class="btn-main">Hoy</span><span class="btn-sub"></span></button>
      <button id="nav-insights" class="btn"><span class="btn-main">AnÃ¡lisis</span><span class="btn-sub"></span></button>

      <button id="btn-soft" class="btn" style="display:none;">
        <span class="btn-main">ğŸ›¡ï¸ Avanzar sin sufrir</span>
        <span class="btn-sub"></span>
      </button>

      <button id="btn-panic" class="btn" style="display:none;">
        <span class="btn-main">ğŸ§¨ No quiero pensar</span>
        <span class="btn-sub"></span>
      </button>

      <!-- NAV: elegir quÃ© cerrar -->
      <button id="btn-close-goalNav" class="btn btn-with-sub">
        <span class="btn-main">ğŸ¯ Cerrar la meta</span>
        <span class="btn-sub">ElegÃ­ quÃ© desbloqueable cerrar.</span>
      </button>

      <button id="btn-capture" class="btn btn-primary" disabled>
        <span class="btn-main">Capturar nudo</span>
        <span class="btn-sub"></span>
      </button>
    </nav>
  </header>

  <main>
    <section id="section-today">
      <div class="marquee">
        <span>ğŸ‘‰ HOY: elegÃ­ 1 DESBLOQUEABLE Â· hacÃ© 5 minutos Â· cerrÃ¡ o pausÃ¡ Â· repetÃ­</span>
      </div>

      <h2>
        Hoy
        <button id="btn-quick-toggle" class="btn" style="float:right; height:min-content;">EdiciÃ³n rÃ¡pida: ON</button>
      </h2>

      <div class="panel panel-doing">
        <div class="panel-head panel-head-doing">
          <div class="panel-head-left">
            <span class="panel-icon">ğŸš€</span>
            <h3 class="panel-title">EN PROGRESO</h3>
          </div>
          <div class="panel-head-right">
            <span class="panel-subtitle">1 a la vez</span>
          </div>
        </div>
        <div id="doing-container"></div>
      </div>

      <div class="panel panel-unlockable">
        <div class="panel-head panel-head-unlockable">
          <div class="panel-head-left">
            <span class="panel-icon">ğŸ”“</span>
            <h3 class="panel-title">DESBLOQUEABLES</h3>
          </div>
          <div class="panel-head-right">
            <span class="panel-subtitle">mÃ¡x 3</span>
          </div>
        </div>
        <div id="unlockable-container"></div>
      </div>

      <details id="done-details" class="panel panel-done" open>
        <summary>Hechos (Ãºltimos 7 dÃ­as)</summary>

        <div class="panel-head panel-head-done" style="margin-top:10px;">
          <div class="panel-head-left">
            <span class="panel-icon">âœ…</span>
            <h3 class="panel-title">HECHOS</h3>
          </div>
          <div class="panel-head-right">
            <span class="panel-subtitle">se borran solos a los 7 dÃ­as</span>
          </div>
        </div>

        <div id="done-container"></div>
      </details>

      <details id="backlog-details" class="panel panel-backlog" open>
        <summary>Backlog (BLOQUEADOS / ALGÃšN DÃA)</summary>

        <div class="panel-head panel-head-backlog" style="margin-top:10px;">
          <div class="panel-head-left">
            <span class="panel-icon">ğŸ—ƒï¸</span>
            <h3 class="panel-title">BACKLOG</h3>
          </div>
          <div class="panel-head-right">
            <span class="panel-subtitle">ordenÃ¡ para atacar mejor</span>
          </div>
        </div>

        <div class="row" style="margin:10px 0;">
          <button id="filter-friction" class="btn btn-primary small">Ordenar por fricciÃ³n</button>
          <button id="filter-impact" class="btn small">Ordenar por impacto</button>
          <button id="filter-recent" class="btn small">Ordenar por mÃ¡s reciente</button>
        </div>

        <div id="backlog-container"></div>
      </details>
    </section>

    <section id="section-insights" style="display:none;">
      <h2>AnÃ¡lisis</h2>

      <div id="insights-container"></div>

      <!-- ANÃLISIS: 1 click -->
      <div class="row" style="margin:10px 0;">
        <button id="btn-close-goal" class="btn btn-primary">ğŸ¯ Cerrar meta (1 click)</button>
        <span id="goal-chip" class="badge" style="cursor:default;">Meta: 1 hecho/dÃ­a</span>
      </div>

      <div class="row" style="margin-top:10px;">
        <button id="btn-export" class="btn btn-primary">Exportar JSON</button>
        <input type="file" id="input-import" accept=".json" style="display:none;">
        <button id="btn-import" class="btn">Importar JSON</button>
      </div>
    </section>

    <aside id="knot-detail" style="display:none;">
      <button id="knot-detail-close" aria-label="Cerrar detalle">âœ•</button>
      <div id="knot-detail-content"></div>
    </aside>
  </main>

  <div id="modal-overlay" class="modal-overlay" style="display:none;">
    <div id="modal-content" class="modal-content"></div>
  </div>

  <script src="utils.js"></script>
  <script src="store.js"></script>
  <script src="rules.js"></script>
  <script src="ui.js"></script>
  <script src="app.js"></script>
</body>
</html>
